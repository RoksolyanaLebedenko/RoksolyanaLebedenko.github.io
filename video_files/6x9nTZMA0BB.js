/*!CK:359950170!*//*1448176776,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["JMaJj"]); }

__d("PagesComposerCarouselPostNuxType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX:"media_attachment_url_input_area_nux"};},null,{});
__d('ReactComposerPhotoCarouselActionType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({HIDE_CAROUSEL_URL_INPUT_AREA:null,SHOW_CAROUSEL_URL_INPUT_AREA:null,SEEN_NUX:null});},null);
__d('ReactComposerPhotoCarouselActions',['ReactComposerPhotoCarouselActionType','ReactComposerDispatcher','ReactComposerPhotoStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();c('ReactComposerPhotoStore');var j={showPhotoCarouselUrlEditArea:function(k){i.dispatch({composerID:k,type:h.SHOW_CAROUSEL_URL_INPUT_AREA});},hidePhotoCarouselUrlEditArea:function(k){i.dispatch({composerID:k,type:h.HIDE_CAROUSEL_URL_INPUT_AREA});},seenNux:function(k){i.dispatch({composerID:k,type:h.SEEN_NUX});}};f.exports=j;},null);
__d('ReactComposerPhotoCarouselStore',['ReactComposerAttachmentActionType','ReactComposerAttachmentStore','ReactComposerAttachmentType','ReactComposerPhotoCarouselActionType','ReactComposerScrapedAttachmentActionType','ReactComposerStoreBase'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,m);o=n&&n.prototype;function p(){'use strict';var q;o.constructor.call(this,function(){return {shouldShowURLEditArea:false,seenNux:false};},function(r){switch(r.type){case k.SHOW_CAROUSEL_URL_INPUT_AREA:q&&q.$ReactComposerPhotoCarouselStore1(r);break;case k.HIDE_CAROUSEL_URL_INPUT_AREA:q&&q.$ReactComposerPhotoCarouselStore2(r);break;case h.SELECT_ATTACHMENT:q&&q.$ReactComposerPhotoCarouselStore3(r);break;case l.ATTACHMENT_SCRAPED:q&&q.$ReactComposerPhotoCarouselStore2(r);break;case k.SEEN_NUX:q&&q.$ReactComposerPhotoCarouselStore4(r);break;default:}});q=this;}p.prototype.$ReactComposerPhotoCarouselStore1=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r);s.shouldShowURLEditArea=true;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore2=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r);s.shouldShowURLEditArea=false;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore2=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r);s.shouldShowURLEditArea=false;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore3=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r),t=i.getSelectedAttachmentID(r);if(s.shouldShowURLEditArea&&t!==j.MEDIA)s.shouldShowURLEditArea=false;this.emitChange(r);};p.prototype.$ReactComposerPhotoCarouselStore4=function(q){'use strict';var r=q.composerID,s=this.getComposerData(r);s.seenNux=true;this.emitChange(r);};p.prototype.shouldShowURLEditArea=function(q){'use strict';return this.getComposerData(q).shouldShowURLEditArea;};p.prototype.seenNux=function(q){'use strict';return this.getComposerData(q).seenNux;};f.exports=new p();},null);
__d("XCarouselPageComposerSeenNuxController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/composer\/carouselseennux\/",{type:{type:"String"}});},null,{});
__d('ReactComposerPhotoCarouselUrlInput.react',['AsyncRequest','ReactComposerContextMixin','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselStore','CSS','Keys','Locale','PagesComposerCarouselPostNuxType','ReactComponentWithPureRenderMixin','React','Image.react','ReactLayeredComponentMixin','ReactDOM','URLMatcher','URLScraper','XCarouselPageComposerSeenNuxController','XUIAmbientNUX.react','XUICloseButton.react','XUITextInput.react','cx','fbglyph','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){'use strict';if(c.__markCompiled)c.__markCompiled();var ea=q.PropTypes,fa=q.createClass({displayName:'ReactComposerPhotoCarouselUrlInput',mixins:[p,i,s],propTypes:{onChange:ea.func.isRequired,onClickRemoveButton:ea.func.isRequired,showUrlInputAreaNux:ea.bool},getInitialState:function(){return {disableArrow:true,showUrlInputAreaNux:this.props.showUrlInputAreaNux&&!k.seenNux(this.context.composerID)};},componentDidMount:function(){var ga=t.findDOMNode(this.refs.inputArea);ga.focus();l.addClass(ga,"_47_s");},renderLayers:function(){var ga=ca._("Photos are taken from a website you choose. Enter a website to build your photo carousel.");return {notice:q.createElement(x,{contextRef:(function(){return this.refs.inputArea;}).bind(this),shown:this.state.showUrlInputAreaNux,onCloseButtonClick:this._onCloseButtonClick,position:'below'},ga)};},_onCloseButtonClick:function(){var ga=w.getURIBuilder().setString('type',o.MEDIA_ATTACHEMENT_URL_INPUT_AREA_NUX).getURI(),ha=new h().setURI(ga);ha.send();this.setState({showUrlInputAreaNux:false});j.seenNux(this.context.composerID);},render:function(){var ga=ca._("Photo Carousel"),ha=ca._("\u041f\u0440\u0438\u0431\u0440\u0430\u0442\u0438"),ia=ca._("Destination URL"),ja=null,ka=null,la=null,ma=n.isRTL();if(ma){ka=da("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-left_20_bluegray-10.png");la=da('/images/composer/carousel/arrow_left_blue.png');}else{ka=da("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/arrow-right_20_bluegray-10.png");la=da('/images/composer/carousel/arrow_right_blue.png');}if(this.state.disableArrow){ja=q.createElement(r,{className:"_3ev6",size:'small',src:ka,onClick:this._handleScrapeLink});}else ja=q.createElement(r,{className:"_3ev7",size:'small',src:la,onClick:this._handleScrapeLink});var na=ca._("Enter a URL");return (q.createElement('div',{className:"_d67"},q.createElement('div',{className:"_d68"},q.createElement('div',{className:"_d69"},ga),q.createElement(y,{className:"_d6a",label:ha,onClick:this.props.onClickRemoveButton,size:'medium'})),q.createElement('div',{className:"_d6b"},q.createElement('div',{className:"_2do6"},ia),q.createElement(z,{className:"_d6c",onBlur:this._onBlur,onChange:this._onChange,onKeyUp:this._handleKeyUp,placeholder:na,ref:'inputArea'}),ja)));},_handleScrapeLink:function(event){var ga=t.findDOMNode(this.refs.inputArea),ha=ga.childNodes[0].value+'\n';this.setState({inputValue:ha});this.props.onChange&&this.props.onChange(ha);},_onBlur:function(event){if(event.target.value){var ga=event.target.value+'\n';this.setState({inputValue:ga});this.props.onChange&&this.props.onChange(ga);}l.removeClass(t.findDOMNode(this.refs.inputArea),"_47_s");},_onChange:function(event){this.setState({inputValue:event.target.value});this.props.onChange&&this.props.onChange(event.target.value);var ga=!this._checkValidUrl(event.target.value);this.setState({disableArrow:ga});},_handleKeyUp:function(event){if(event.keyCode===m.RETURN){var ga=event.target.value+'\n';this.setState({inputValue:ga});this.props.onChange&&this.props.onChange(ga);}},_checkValidUrl:function(ga){return v.match(ga)||u.permissiveMatch(ga);}});f.exports=fa;},null);
__d('ReactComposerScrapedAttachmentActions',['ReactComposerScrapedAttachmentActionType','ReactComposerDispatcher','ReactComposerScrapedAttachmentStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();c('ReactComposerScrapedAttachmentStore');j.prototype.enabled=function(k,l){'use strict';var m={composerID:k,type:h.ATTACHMENT_SCRAPE_ENABLED,enabled:l};i.dispatch(m);};j.prototype.setScrapedAttachment=function(k,l,m){'use strict';var n={composerID:k,type:h.ATTACHMENT_SCRAPED,markup:l,attachmentConfig:m};i.dispatch(n);};j.prototype.setPermissiveMatch=function(k,l){'use strict';var m={composerID:k,type:h.ATTACHMENT_PERMISSIVE_MATCH_SETTED,permissiveMatch:l};i.dispatch(m);};j.prototype.scrapeAttachment=function(k,l,m,n){'use strict';var o={composerID:k,type:h.ATTACHMENT_SCRAPE_INTENDED,targetID:l,value:m,entryPoint:n};i.dispatch(o);};j.prototype.uploadImagesForCarousel=function(k){'use strict';var l={composerID:k.composerID,type:h.ATTACHMENT_CAROUSEL_UPLOAD,targetID:k.targetID,scrapeUrl:k.scrapeUrl,carouselParams:k.carouselParams,entryPoint:k.entryPoint};i.dispatch(l);};function j(){'use strict';}f.exports=new j();},null);
__d('ReactComposerStatusUtils',['Bootloader','ReactComposerAttachmentActions','ReactComposerAttachmentType','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','ReactComposerStatusStore','EditorState','PUWMethods','URLMatcher','URLScraper','uniqueID'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s={scrapeLink:function(t,u,v,w){if(!l.isEnabled(t))return;if(l.getMarkup(t))return;var x=p.permissiveMatch(v);if(x!==l.getPermissiveMatch(t)){k.setPermissiveMatch(t,x);var y=q.match(v)||x;if(y)k.scrapeAttachment(t,u,y,w);}},uploadPastedFile:function(t,u,v){u.uploadID=r();u.filename='';v&&v.enqueueAsyncUploadRequest(t,[u],{},{});},uploadDroppedFiles:function(t,u,v){i.selectAttachment(t,j.MEDIA,true);h.loadModules(["ReactComposerMediaUtils"],function(w){w.uploadPhotosOrVideo(t,u,v,true,o.DRAGDROP);});},handleMarkdownPreview:function(t,u,v,w){if(!v||!v.markdownPreviewAttachment)return;var x=v.markdownPreviewAttachment.action;if(!w)w=m.getEditorState(t);if(!w)return;var y=w.getCurrentContent().getPlainText();if(y.indexOf('#markdown')>-1){x.showAndUpdatePreview(t,u,w.getCurrentContent());}else x.hidePreview(t);}};f.exports=s;},null);
__d('ReactComposerPhotoCarouselUrlInputContainer.react',['ReactComposerContextMixin','ReactComposerPhotoCarouselActions','ReactComposerPhotoCarouselUrlInput.react','ReactComposerStatusUtils','PagesComposerPostActionsLoggerEvent','PagesComposerActionsLogger','ReactComponentWithPureRenderMixin','React','URLScraper'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=o.PropTypes,r=o.createClass({displayName:'ReactComposerPhotoCarouselUrlInputContainer',mixins:[n,h],propTypes:{showUrlInputAreaNux:q.bool},render:function(){return (o.createElement(j,{onChange:this._onMentionsInputChange,onClickRemoveButton:this._onClickRemoveButton,showUrlInputAreaNux:this.props.showUrlInputAreaNux}));},_onClickRemoveButton:function(){i.hidePhotoCarouselUrlEditArea(this.context.composerID);m.log({event:l.REMOVE_PHOTO_CAROUSEL_URL_INPUT,target_id:parseInt(this.context.targetID,10)});},_onMentionsInputChange:function(s){if(!p.trigger(s))k.scrapeLink(this.context.composerID,this.context.targetID,s,this.context.composerType);}});f.exports=r;},null);
__d('ReactComposerAttachmentPreview.react',['DOMContainer.react','ReactComponentWithPureRenderMixin','React'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=j.PropTypes,l=j.createClass({displayName:'ReactComposerAttachmentPreview',mixins:[i],propTypes:{markup:k.instanceOf(HTMLElement).isRequired},render:function(){if(!this.props.markup)return j.createElement('noscript',null);return (j.createElement(h,null,this.props.markup));}});f.exports=l;},null);
__d('ReactComposerLocationAttachmentActionType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports=h({LOCATION_ATTACHMENT_ENABLED:null,FETCH_LOCATION_ATTACHMENT:null,SET_LOCATION_MARKUP:null});},null);
__d("XReactComposerLocationAttachmentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/location\/attachment\/",{composer_id:{type:"String",required:true},location_id:{type:"String",required:true},target_id:{type:"String",required:true}});},null,{});
__d('ReactComposerLocationAttachmentStore',['ReactComposerAttachmentActionType','ReactComposerAttachmentType','ReactComposerLocationAttachmentActionType','ReactComposerStoreBase','XReactComposerLocationAttachmentController','AsyncRequest'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;n=babelHelpers.inherits(p,k);o=n&&n.prototype;function p(){'use strict';var q;o.constructor.call(this,function(){return {isEnabled:false,isFetching:false,markup:null,pendingRequest:null};},function(r){switch(r.type){case j.LOCATION_ATTACHMENT_ENABLED:q&&q.$ReactComposerLocationAttachmentStore1(r);break;case j.FETCH_LOCATION_ATTACHMENT:q&&q.$ReactComposerLocationAttachmentStore2(r);break;case j.SET_LOCATION_MARKUP:q&&q.$ReactComposerLocationAttachmentStore3(r);break;case h.SELECT_ATTACHMENT:q&&q.$ReactComposerLocationAttachmentStore4(r);break;}});q=this;}p.prototype.isEnabled=function(q){'use strict';return this.getComposerData(q).isEnabled;};p.prototype.getMarkup=function(q){'use strict';return this.getComposerData(q).markup;};p.prototype.isFetching=function(q){'use strict';return this.getComposerData(q).isFetching;};p.prototype.$ReactComposerLocationAttachmentStore1=function(q){'use strict';var r=this.validateAction(q,['composerID','enabled']),s=r[0],t=r[1],u=this.getComposerData(s);u.isEnabled=t;};p.prototype.$ReactComposerLocationAttachmentStore2=function(q){'use strict';var r=this.validateAction(q,['composerID','locationID','targetID']),s=r[0],t=r[1],u=r[2];if(!this.isEnabled(s))return;var v=this.getComposerData(s);v.isFetching=true;var w=l.getURIBuilder().setString('composer_id',s).setString('location_id',t).setString('target_id',u).getURI();v.pendingRequest=new m(w).setFinallyHandler((function(){v.isFetching=false;v.pendingRequest=null;this.emitChange(s);}).bind(this));v.pendingRequest.send();this.emitChange(s);};p.prototype.$ReactComposerLocationAttachmentStore3=function(q){'use strict';var r=this.validateAction(q,['composerID','markup']),s=r[0],t=r[1],u=this.getComposerData(s);u.markup=t;this.emitChange(s);};p.prototype.$ReactComposerLocationAttachmentStore4=function(q){'use strict';var r=this.validateAction(q,['composerID','id']),s=r[0],t=r[1];if(t===i.STATUS)return;var u=this.getComposerData(s);u.markup=null;u.isFetching=false;u.pendingRequest&&u.pendingRequest.abandon();this.emitChange(s);};f.exports=new p();},null);
__d('ReactComposerLocationAttachmentActions',['ReactComposerLocationAttachmentActionType','ReactComposerDispatcher','ReactComposerLocationAttachmentStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();c('ReactComposerLocationAttachmentStore');j.prototype.enabled=function(k,l){'use strict';i.dispatch({composerID:k,type:h.LOCATION_ATTACHMENT_ENABLED,enabled:l});};j.prototype.fetchLocationAttachment=function(k,l,m){'use strict';i.dispatch({composerID:k,type:h.FETCH_LOCATION_ATTACHMENT,locationID:l,targetID:m});};j.prototype.setMarkup=function(k,l){'use strict';i.dispatch({composerID:k,type:h.SET_LOCATION_MARKUP,markup:l});};function j(){'use strict';}f.exports=new j();},null);
__d('ReactComposerMinutiaeAttachmentActions',['ReactComposerMinutiaeAttachmentActionType','ReactComposerDispatcher','ReactComposerMinutiaeAttachmentStore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();c('ReactComposerMinutiaeAttachmentStore');j.prototype.fetchMinutiaeAttachment=function(k,l,m,n,o){'use strict';var p={composerID:k,type:h.FETCH_ATTACHMENT,actionID:l,objectID:m,targetID:n,isTimeline:o};i.dispatch(p);};j.prototype.setMarkup=function(k,l){'use strict';var m={composerID:k,type:h.SET_MARKUP,markup:l};i.dispatch(m);};function j(){'use strict';}f.exports=new j();},null);
__d('ReactComposerAttachmentPreviewContainer.react',['ReactComposerLocationAttachmentActions','ReactComposerLocationAttachmentStore','ReactComposerMinutiaeAttachmentActions','ReactComposerMinutiaeAttachmentStore','ReactComposerPropsAndStoreBasedStateMixin','ReactComposerAttachmentPreview.react','ReactComposerScrapedAttachmentActions','ReactComposerScrapedAttachmentStore','Arbiter','DOM','Event','ReactComponentWithPureRenderMixin','React','ReactDOM','csx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=t.PropTypes,x=t.createClass({displayName:'ReactComposerAttachmentPreviewContainer',_buttonEvent:undefined,mixins:[s,l(o,k,i)],propTypes:{markup:w.instanceOf(HTMLElement)},statics:{calculateState:function(y,z){var aa=o.getMarkup(y),ba=k.getMarkup(y),ca=i.getMarkup(y);return {markup:aa||ba||ca};}},componentDidMount:function(){this._cleanupButtonEvent();this._setButtonEvent();},componentDidUpdate:function(){this._setButtonEvent();},componentWillUnmount:function(){this._cleanupButtonEvent();},render:function(){if(!this.state.markup)return null;return (t.createElement(m,{ref:'attachment',markup:this.state.markup}));},_setButtonEvent:function(){if(this.refs.attachment){var y=q.scry(u.findDOMNode(this.refs.attachment),"._9s")[0];if(y)this._buttonEvent=r.listen(y,'click',(function(event){n.setScrapedAttachment(this.context.composerID,null,{});j.setMarkup(this.context.composerID,null);h.setMarkup(this.context.composerID,null);this._buttonEvent&&this._buttonEvent.remove();this._buttonEvent=null;}).bind(this));p.inform('react_composer_dom_ready/'+this.context.composerID);}},_cleanupButtonEvent:function(){this._buttonEvent&&this._buttonEvent.remove();}});f.exports=x;},null);